<div class="setup-form container">

  <%= form_for(@setup, url: wizard_path) do |f| %>

    <% if @setup.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@setup.errors.count, "error") %> prohibited this setup from being saved:</h2>
        <ul>
        <% @setup.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <p class="setup-form-label">Add parts of your setup</p>

    <%= f.fields_for :parts do |s| %>
      <% @categories.each do |cat| %>
        <div class="field form-group">
          <%= s.label :category_id, "Part Type" %>
          <%= select_tag(:category_id, options_for_select(@categories),
            :prompt => "Select one!", name: "parts[][category]") %>
        </div>
        <div class="field form-group">
          <%= s.label :name, "Part Name" %>
          <%= s.text_field :name, name: "parts[][name]", :class => "setup-form-input" %>
        </div>
        <div class="field form-group">
          <%= s.label :link, "URL" %>
          <%= s.text_field :link, name: "parts[][link]", :class => "setup-form-input" %>
        </div>
      <% end %>
    <% end %>

    <div class="actions">
      <%= f.submit "Show off my setup!", :class => "btn setup-form-btn" %>
    </div>

    <%= link_to 'Skip this step', next_wizard_path, :class => "link" %>

  <% end %>

</div>
